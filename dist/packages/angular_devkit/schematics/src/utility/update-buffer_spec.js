"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
const update_buffer_1 = require("./update-buffer");
describe('UpdateBuffer', () => {
    describe('inserts', () => {
        it('works', () => {
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('Hello World'));
            mb.insertRight(6, Buffer.from('Beautiful '));
            expect(mb.toString()).toBe('Hello Beautiful World');
            mb.insertRight(6, Buffer.from('Great '));
            expect(mb.toString()).toBe('Hello Beautiful Great World');
            mb.insertRight(0, Buffer.from('1 '));
            expect(mb.toString()).toBe('1 Hello Beautiful Great World');
            mb.insertRight(5, Buffer.from('2 '));
            expect(mb.toString()).toBe('1 Hello2  Beautiful Great World');
            mb.insertRight(8, Buffer.from('3 '));
            expect(mb.toString()).toBe('1 Hello2  Beautiful Great Wo3 rld');
            mb.insertRight(0, Buffer.from('4 '));
            expect(mb.toString()).toBe('1 4 Hello2  Beautiful Great Wo3 rld');
            mb.insertRight(8, Buffer.from('5 '));
            expect(mb.toString()).toBe('1 4 Hello2  Beautiful Great Wo3 5 rld');
            mb.insertRight(1, Buffer.from('a '));
            expect(mb.toString()).toBe('1 4 Ha ello2  Beautiful Great Wo3 5 rld');
            mb.insertRight(2, Buffer.from('b '));
            expect(mb.toString()).toBe('1 4 Ha eb llo2  Beautiful Great Wo3 5 rld');
            mb.insertRight(7, Buffer.from('c '));
            expect(mb.toString()).toBe('1 4 Ha eb llo2  Beautiful Great Wc o3 5 rld');
            mb.insertRight(11, Buffer.from('d '));
            expect(mb.toString()).toBe('1 4 Ha eb llo2  Beautiful Great Wc o3 5 rldd ');
        });
        it('works _left and _right', () => {
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('Hello World'));
            mb.insertRight(6, Buffer.from('Beautiful '));
            expect(mb.toString()).toBe('Hello Beautiful World');
            mb.insertLeft(6, Buffer.from('Great '));
            expect(mb.toString()).toBe('Hello Great Beautiful World');
            mb.insertLeft(6, Buffer.from('Awesome '));
            expect(mb.toString()).toBe('Hello Great Awesome Beautiful World');
        });
    });
    describe('delete', () => {
        it('works for non-overlapping ranges', () => {
            //                                                111111111122222222223333333333444444
            //                                      0123456789012345678901234567890123456789012345
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('1 4 Ha eb llo2  Beautiful Great Wc o3 5 rldd '));
            mb.remove(43, 2);
            expect(mb.toString()).toBe('1 4 Ha eb llo2  Beautiful Great Wc o3 5 rld');
            mb.remove(33, 2);
            expect(mb.toString()).toBe('1 4 Ha eb llo2  Beautiful Great Wo3 5 rld');
            mb.remove(8, 2);
            expect(mb.toString()).toBe('1 4 Ha ello2  Beautiful Great Wo3 5 rld');
            mb.remove(5, 2);
            expect(mb.toString()).toBe('1 4 Hello2  Beautiful Great Wo3 5 rld');
            mb.remove(38, 2);
            expect(mb.toString()).toBe('1 4 Hello2  Beautiful Great Wo3 rld');
            mb.remove(2, 2);
            expect(mb.toString()).toBe('1 Hello2  Beautiful Great Wo3 rld');
            mb.remove(36, 2);
            expect(mb.toString()).toBe('1 Hello2  Beautiful Great World');
            mb.remove(13, 2);
            expect(mb.toString()).toBe('1 Hello Beautiful Great World');
            mb.remove(0, 2);
            expect(mb.toString()).toBe('Hello Beautiful Great World');
            mb.remove(26, 6);
            expect(mb.toString()).toBe('Hello Beautiful World');
            mb.remove(16, 10);
            expect(mb.toString()).toBe('Hello World');
        });
        it('handles overlapping ranges', () => {
            //                                      0123456789012
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('ABCDEFGHIJKLM'));
            // Overlapping.
            mb.remove(2, 5);
            expect(mb.toString()).toBe('ABHIJKLM');
            mb.remove(3, 2);
            expect(mb.toString()).toBe('ABHIJKLM');
            mb.remove(3, 6);
            expect(mb.toString()).toBe('ABJKLM');
            mb.remove(3, 6);
            expect(mb.toString()).toBe('ABJKLM');
            mb.remove(10, 1);
            expect(mb.toString()).toBe('ABJLM');
            mb.remove(1, 11);
            expect(mb.toString()).toBe('AM');
        });
    });
    describe('inserts and deletes', () => {
        it('works for non-overlapping indices', () => {
            //                                                1
            //                                      01234567890
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('01234567890'));
            mb.insertRight(6, Buffer.from('A'));
            expect(mb.toString()).toBe('012345A67890');
            mb.insertRight(2, Buffer.from('B'));
            expect(mb.toString()).toBe('01B2345A67890');
            mb.remove(3, 4);
            expect(mb.toString()).toBe('01B27890');
            mb.insertRight(4, Buffer.from('C'));
            expect(mb.toString()).toBe('01B27890');
            mb.remove(2, 6);
            expect(mb.toString()).toBe('01B890');
        });
        it('works for _left/_right inserts', () => {
            //                                      0123456789
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('0123456789'));
            mb.insertLeft(5, Buffer.from('A'));
            expect(mb.toString()).toBe('01234A56789');
            mb.insertRight(5, Buffer.from('B'));
            expect(mb.toString()).toBe('01234AB56789');
            mb.insertRight(10, Buffer.from('C'));
            expect(mb.toString()).toBe('01234AB56789C');
            mb.remove(5, 5);
            expect(mb.toString()).toBe('01234AB');
            mb.remove(0, 5);
            expect(mb.toString()).toBe('');
        });
        it('supports essential', () => {
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('0123456789'));
            mb.insertLeft(5, Buffer.from('A'), true);
            expect(mb.toString()).toBe('01234A56789');
            mb.remove(5, 5);
            expect(mb.toString()).toBe('01234A');
            expect(() => mb.remove(0, 5)).toThrow();
            expect(mb.toString()).toBe('01234A');
            expect(() => mb.insertRight(6, Buffer.from('B'), true)).toThrow();
            expect(mb.toString()).toBe('01234A');
        });
        it('works for content at start/end of buffer', () => {
            const buffer = new update_buffer_1.UpdateBuffer(Buffer.from('012345'));
            buffer.insertLeft(0, Buffer.from('ABC'));
            buffer.insertRight(6, Buffer.from('DEF'));
            buffer.remove(0, 6);
            expect(buffer.toString()).toBe('ABC');
        });
    });
    describe('generate', () => {
        it('works', () => {
            //                                      0123456789
            const mb = new update_buffer_1.UpdateBuffer(Buffer.from('0123456789'));
            mb.insertLeft(5, Buffer.from('A'));
            expect(mb.toString()).toBe('01234A56789');
            mb.remove(5, 5);
            expect(mb.toString()).toBe('01234A');
            mb.remove(0, 5);
            expect(mb.toString()).toBe('');
            const buffer = mb.generate();
            expect(buffer.toString()).toBe('');
            expect(buffer.length).toBe(0);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXBkYXRlLWJ1ZmZlcl9zcGVjLmpzIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9lcm5pZWRhdmlzL0NvZGUvYW5ndWxhci1jbGkvIiwic291cmNlcyI6WyJwYWNrYWdlcy9hbmd1bGFyX2RldmtpdC9zY2hlbWF0aWNzL3NyYy91dGlsaXR5L3VwZGF0ZS1idWZmZXJfc3BlYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7R0FNRztBQUNILG1EQUErQztBQUUvQyxRQUFRLENBQUMsY0FBYyxFQUFFLEdBQUcsRUFBRTtJQUM1QixRQUFRLENBQUMsU0FBUyxFQUFFLEdBQUcsRUFBRTtRQUN2QixFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtZQUNmLE1BQU0sRUFBRSxHQUFHLElBQUksNEJBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFFeEQsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUVwRCxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDekMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO1lBRTFELEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUM7WUFFNUQsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLE1BQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsaUNBQWlDLENBQUMsQ0FBQztZQUU5RCxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO1lBRWhFLEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxDQUFDLENBQUM7WUFFbEUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLE1BQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsdUNBQXVDLENBQUMsQ0FBQztZQUVwRSxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO1lBRXRFLEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLDJDQUEyQyxDQUFDLENBQUM7WUFFeEUsRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFD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LEdBQUcsRUFBRTtRQUN4QixFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRTtZQUNmLGtEQUFrRDtZQUNsRCxNQUFNLEVBQUUsR0FBRyxJQUFJLDRCQUFZLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBRXZELEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQzFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2hCLE1BQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDckMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDaEIsTUFBTSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUUvQixNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDN0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5pbXBvcnQgeyBVcGRhdGVCdWZmZXIgfSBmcm9tICcuL3VwZGF0ZS1idWZmZXInO1xuXG5kZXNjcmliZSgnVXBkYXRlQnVmZmVyJywgKCkgPT4ge1xuICBkZXNjcmliZSgnaW5zZXJ0cycsICgpID0+IHtcbiAgICBpdCgnd29ya3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYiA9IG5ldyBVcGRhdGVCdWZmZXIoQnVmZmVyLmZyb20oJ0hlbGxvIFdvcmxkJykpO1xuXG4gICAgICBtYi5pbnNlcnRSaWdodCg2LCBCdWZmZXIuZnJvbSgnQmVhdXRpZnVsICcpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCdIZWxsbyBCZWF1dGlmdWwgV29ybGQnKTtcblxuICAgICAgbWIuaW5zZXJ0UmlnaHQoNiwgQnVmZmVyLmZyb20oJ0dyZWF0ICcpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCdIZWxsbyBCZWF1dGlmdWwgR3JlYXQgV29ybGQnKTtcblxuICAgICAgbWIuaW5zZXJ0UmlnaHQoMCwgQnVmZmVyLmZyb20oJzEgJykpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzEgSGVsbG8gQmVhdXRpZnVsIEdyZWF0IFdvcmxkJyk7XG5cbiAgICAgIG1iLmluc2VydFJpZ2h0KDUsIEJ1ZmZlci5mcm9tKCcyICcpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIEhlbGxvMiAgQmVhdXRpZnVsIEdyZWF0IFdvcmxkJyk7XG5cbiAgICAgIG1iLmluc2VydFJpZ2h0KDgsIEJ1ZmZlci5mcm9tKCczICcpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIEhlbGxvMiAgQmVhdXRpZnVsIEdyZWF0IFdvMyBybGQnKTtcblxuICAgICAgbWIuaW5zZXJ0UmlnaHQoMCwgQnVmZmVyLmZyb20oJzQgJykpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzEgNCBIZWxsbzIgIEJlYXV0aWZ1bCBHcmVhdCBXbzMgcmxkJyk7XG5cbiAgICAgIG1iLmluc2VydFJpZ2h0KDgsIEJ1ZmZlci5mcm9tKCc1ICcpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIDQgSGVsbG8yICBCZWF1dGlmdWwgR3JlYXQgV28zIDUgcmxkJyk7XG5cbiAgICAgIG1iLmluc2VydFJpZ2h0KDEsIEJ1ZmZlci5mcm9tKCdhICcpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIDQgSGEgZWxsbzIgIEJlYXV0aWZ1bCBHcmVhdCBXbzMgNSBybGQnKTtcblxuICAgICAgbWIuaW5zZXJ0UmlnaHQoMiwgQnVmZmVyLmZyb20oJ2IgJykpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzEgNCBIYSBlYiBsbG8yICBCZWF1dGlmdWwgR3JlYXQgV28zIDUgcmxkJyk7XG5cbiAgICAgIG1iLmluc2VydFJpZ2h0KDcsIEJ1ZmZlci5mcm9tKCdjICcpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIDQgSGEgZWIgbGxvMiAgQmVhdXRpZnVsIEdyZWF0IFdjIG8zIDUgcmxkJyk7XG5cbiAgICAgIG1iLmluc2VydFJpZ2h0KDExLCBCdWZmZXIuZnJvbSgnZCAnKSk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMSA0IEhhIGViIGxsbzIgIEJlYXV0aWZ1bCBHcmVhdCBXYyBvMyA1IHJsZGQgJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnd29ya3MgX2xlZnQgYW5kIF9yaWdodCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG1iID0gbmV3IFVwZGF0ZUJ1ZmZlcihCdWZmZXIuZnJvbSgnSGVsbG8gV29ybGQnKSk7XG5cbiAgICAgIG1iLmluc2VydFJpZ2h0KDYsIEJ1ZmZlci5mcm9tKCdCZWF1dGlmdWwgJykpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJ0hlbGxvIEJlYXV0aWZ1bCBXb3JsZCcpO1xuXG4gICAgICBtYi5pbnNlcnRMZWZ0KDYsIEJ1ZmZlci5mcm9tKCdHcmVhdCAnKSk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnSGVsbG8gR3JlYXQgQmVhdXRpZnVsIFdvcmxkJyk7XG5cbiAgICAgIG1iLmluc2VydExlZnQoNiwgQnVmZmVyLmZyb20oJ0F3ZXNvbWUgJykpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJ0hlbGxvIEdyZWF0IEF3ZXNvbWUgQmVhdXRpZnVsIFdvcmxkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkZWxldGUnLCAoKSA9PiB7XG4gICAgaXQoJ3dvcmtzIGZvciBub24tb3ZlcmxhcHBpbmcgcmFuZ2VzJywgKCkgPT4ge1xuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMTExMTExMTExMjIyMjIyMjIyMjMzMzMzMzMzMzM0NDQ0NDRcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1XG4gICAgICBjb25zdCBtYiA9IG5ldyBVcGRhdGVCdWZmZXIoQnVmZmVyLmZyb20oJzEgNCBIYSBlYiBsbG8yICBCZWF1dGlmdWwgR3JlYXQgV2MgbzMgNSBybGRkICcpKTtcblxuICAgICAgbWIucmVtb3ZlKDQzLCAyKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIDQgSGEgZWIgbGxvMiAgQmVhdXRpZnVsIEdyZWF0IFdjIG8zIDUgcmxkJyk7XG4gICAgICBtYi5yZW1vdmUoMzMsIDIpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzEgNCBIYSBlYiBsbG8yICBCZWF1dGlmdWwgR3JlYXQgV28zIDUgcmxkJyk7XG4gICAgICBtYi5yZW1vdmUoOCwgMik7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMSA0IEhhIGVsbG8yICBCZWF1dGlmdWwgR3JlYXQgV28zIDUgcmxkJyk7XG4gICAgICBtYi5yZW1vdmUoNSwgMik7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMSA0IEhlbGxvMiAgQmVhdXRpZnVsIEdyZWF0IFdvMyA1IHJsZCcpO1xuICAgICAgbWIucmVtb3ZlKDM4LCAyKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIDQgSGVsbG8yICBCZWF1dGlmdWwgR3JlYXQgV28zIHJsZCcpO1xuICAgICAgbWIucmVtb3ZlKDIsIDIpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzEgSGVsbG8yICBCZWF1dGlmdWwgR3JlYXQgV28zIHJsZCcpO1xuICAgICAgbWIucmVtb3ZlKDM2LCAyKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcxIEhlbGxvMiAgQmVhdXRpZnVsIEdyZWF0IFdvcmxkJyk7XG4gICAgICBtYi5yZW1vdmUoMTMsIDIpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzEgSGVsbG8gQmVhdXRpZnVsIEdyZWF0IFdvcmxkJyk7XG4gICAgICBtYi5yZW1vdmUoMCwgMik7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnSGVsbG8gQmVhdXRpZnVsIEdyZWF0IFdvcmxkJyk7XG4gICAgICBtYi5yZW1vdmUoMjYsIDYpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJ0hlbGxvIEJlYXV0aWZ1bCBXb3JsZCcpO1xuICAgICAgbWIucmVtb3ZlKDE2LCAxMCk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnSGVsbG8gV29ybGQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIG92ZXJsYXBwaW5nIHJhbmdlcycsICgpID0+IHtcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwMTIzNDU2Nzg5MDEyXG4gICAgICBjb25zdCBtYiA9IG5ldyBVcGRhdGVCdWZmZXIoQnVmZmVyLmZyb20oJ0FCQ0RFRkdISUpLTE0nKSk7XG5cbiAgICAgIC8vIE92ZXJsYXBwaW5nLlxuICAgICAgbWIucmVtb3ZlKDIsIDUpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJ0FCSElKS0xNJyk7XG4gICAgICBtYi5yZW1vdmUoMywgMik7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnQUJISUpLTE0nKTtcbiAgICAgIG1iLnJlbW92ZSgzLCA2KTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCdBQkpLTE0nKTtcbiAgICAgIG1iLnJlbW92ZSgzLCA2KTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCdBQkpLTE0nKTtcbiAgICAgIG1iLnJlbW92ZSgxMCwgMSk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnQUJKTE0nKTtcbiAgICAgIG1iLnJlbW92ZSgxLCAxMSk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnQU0nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2luc2VydHMgYW5kIGRlbGV0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3dvcmtzIGZvciBub24tb3ZlcmxhcHBpbmcgaW5kaWNlcycsICgpID0+IHtcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMVxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAxMjM0NTY3ODkwXG4gICAgICBjb25zdCBtYiA9IG5ldyBVcGRhdGVCdWZmZXIoQnVmZmVyLmZyb20oJzAxMjM0NTY3ODkwJykpO1xuXG4gICAgICBtYi5pbnNlcnRSaWdodCg2LCBCdWZmZXIuZnJvbSgnQScpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcwMTIzNDVBNjc4OTAnKTtcbiAgICAgIG1iLmluc2VydFJpZ2h0KDIsIEJ1ZmZlci5mcm9tKCdCJykpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzAxQjIzNDVBNjc4OTAnKTtcblxuICAgICAgbWIucmVtb3ZlKDMsIDQpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzAxQjI3ODkwJyk7XG4gICAgICBtYi5pbnNlcnRSaWdodCg0LCBCdWZmZXIuZnJvbSgnQycpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcwMUIyNzg5MCcpO1xuXG4gICAgICBtYi5yZW1vdmUoMiwgNik7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMDFCODkwJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnd29ya3MgZm9yIF9sZWZ0L19yaWdodCBpbnNlcnRzJywgKCkgPT4ge1xuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAxMjM0NTY3ODlcbiAgICAgIGNvbnN0IG1iID0gbmV3IFVwZGF0ZUJ1ZmZlcihCdWZmZXIuZnJvbSgnMDEyMzQ1Njc4OScpKTtcblxuICAgICAgbWIuaW5zZXJ0TGVmdCg1LCBCdWZmZXIuZnJvbSgnQScpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcwMTIzNEE1Njc4OScpO1xuICAgICAgbWIuaW5zZXJ0UmlnaHQoNSwgQnVmZmVyLmZyb20oJ0InKSk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMDEyMzRBQjU2Nzg5Jyk7XG4gICAgICBtYi5pbnNlcnRSaWdodCgxMCwgQnVmZmVyLmZyb20oJ0MnKSk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMDEyMzRBQjU2Nzg5QycpO1xuICAgICAgbWIucmVtb3ZlKDUsIDUpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzAxMjM0QUInKTtcbiAgICAgIG1iLnJlbW92ZSgwLCA1KTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzdXBwb3J0cyBlc3NlbnRpYWwnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYiA9IG5ldyBVcGRhdGVCdWZmZXIoQnVmZmVyLmZyb20oJzAxMjM0NTY3ODknKSk7XG5cbiAgICAgIG1iLmluc2VydExlZnQoNSwgQnVmZmVyLmZyb20oJ0EnKSwgdHJ1ZSk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMDEyMzRBNTY3ODknKTtcbiAgICAgIG1iLnJlbW92ZSg1LCA1KTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcwMTIzNEEnKTtcbiAgICAgIGV4cGVjdCgoKSA9PiBtYi5yZW1vdmUoMCwgNSkpLnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcwMTIzNEEnKTtcblxuICAgICAgZXhwZWN0KCgpID0+IG1iLmluc2VydFJpZ2h0KDYsIEJ1ZmZlci5mcm9tKCdCJyksIHRydWUpKS50b1Rocm93KCk7XG4gICAgICBleHBlY3QobWIudG9TdHJpbmcoKSkudG9CZSgnMDEyMzRBJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnd29ya3MgZm9yIGNvbnRlbnQgYXQgc3RhcnQvZW5kIG9mIGJ1ZmZlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVcGRhdGVCdWZmZXIoQnVmZmVyLmZyb20oJzAxMjM0NScpKTtcbiAgICAgIGJ1ZmZlci5pbnNlcnRMZWZ0KDAsIEJ1ZmZlci5mcm9tKCdBQkMnKSk7XG4gICAgICBidWZmZXIuaW5zZXJ0UmlnaHQoNiwgQnVmZmVyLmZyb20oJ0RFRicpKTtcbiAgICAgIGJ1ZmZlci5yZW1vdmUoMCwgNik7XG4gICAgICBleHBlY3QoYnVmZmVyLnRvU3RyaW5nKCkpLnRvQmUoJ0FCQycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3dvcmtzJywgKCkgPT4ge1xuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAxMjM0NTY3ODlcbiAgICAgIGNvbnN0IG1iID0gbmV3IFVwZGF0ZUJ1ZmZlcihCdWZmZXIuZnJvbSgnMDEyMzQ1Njc4OScpKTtcblxuICAgICAgbWIuaW5zZXJ0TGVmdCg1LCBCdWZmZXIuZnJvbSgnQScpKTtcbiAgICAgIGV4cGVjdChtYi50b1N0cmluZygpKS50b0JlKCcwMTIzNEE1Njc4OScpO1xuICAgICAgbWIucmVtb3ZlKDUsIDUpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJzAxMjM0QScpO1xuICAgICAgbWIucmVtb3ZlKDAsIDUpO1xuICAgICAgZXhwZWN0KG1iLnRvU3RyaW5nKCkpLnRvQmUoJycpO1xuXG4gICAgICBjb25zdCBidWZmZXIgPSBtYi5nZW5lcmF0ZSgpO1xuICAgICAgZXhwZWN0KGJ1ZmZlci50b1N0cmluZygpKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdChidWZmZXIubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19